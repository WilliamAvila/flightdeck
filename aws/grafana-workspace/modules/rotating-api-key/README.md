# Rotating Grafana API key.

Uses AWS SecretsManager to maintain a rotating Grafana API key. An initial admin
key must be provided.

<!-- BEGIN_TF_DOCS -->

## Requirements

| Name                                                                     | Version   |
| ------------------------------------------------------------------------ | --------- |
| <a name="requirement_terraform"></a> [terraform](#requirement_terraform) | >= 0.14.8 |
| <a name="requirement_aws"></a> [aws](#requirement_aws)                   | ~> 4.0    |
| <a name="requirement_grafana"></a> [grafana](#requirement_grafana)       | ~> 1.13   |

## Modules

| Name                                                        | Source                                                                | Version |
| ----------------------------------------------------------- | --------------------------------------------------------------------- | ------- |
| <a name="module_rotation"></a> [rotation](#module_rotation) | github.com/thoughtbot/terraform-aws-secrets//secret-rotation-function | v0.8.0  |
| <a name="module_secret"></a> [secret](#module_secret)       | github.com/thoughtbot/terraform-aws-secrets//secret                   | v0.8.0  |

## Inputs

| Name                                                                              | Description                                                           | Type           | Default | Required |
| --------------------------------------------------------------------------------- | --------------------------------------------------------------------- | -------------- | ------- | :------: |
| <a name="input_admin_principals"></a> [admin_principals](#input_admin_principals) | Principals allowed to peform admin actions (default: current account) | `list(string)` | `null`  |    no    |
| <a name="input_initial_api_key"></a> [initial_api_key](#input_initial_api_key)    | API key generated by a user from the admin panel                      | `string`       | `""`    |    no    |
| <a name="input_name"></a> [name](#input_name)                                     | Name for the AWS secret                                               | `string`       | n/a     |   yes    |
| <a name="input_read_principals"></a> [read_principals](#input_read_principals)    | Principals allowed to read the secret (default: current account)      | `list(string)` | `null`  |    no    |
| <a name="input_tags"></a> [tags](#input_tags)                                     | Tags which should be applied to created resources                     | `map(string)`  | `{}`    |    no    |
| <a name="input_trust_tags"></a> [trust_tags](#input_trust_tags)                   | Tags required on principals accessing the secret                      | `map(string)`  | `{}`    |    no    |
| <a name="input_workspace_url"></a> [workspace_url](#input_workspace_url)          | URL for the Grafana workspace                                         | `string`       | n/a     |   yes    |

## Outputs

| Name                                                                 | Description                                               |
| -------------------------------------------------------------------- | --------------------------------------------------------- |
| <a name="output_policy_json"></a> [policy_json](#output_policy_json) | Required IAM policies                                     |
| <a name="output_secret_arn"></a> [secret_arn](#output_secret_arn)    | ARN of the secrets manager secret containing credentials  |
| <a name="output_secret_name"></a> [secret_name](#output_secret_name) | Name of the secrets manager secret containing credentials |

<!-- END_TF_DOCS -->
